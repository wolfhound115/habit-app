{% load static %}
{% load habit_tags %}

<!DOCTYPE>
<header>


	<!-- this is for the forms to work properly -->
	<link rel="stylesheet" type="text/css" href="/static/admin/css/base.css">
	<link rel="stylesheet" type="text/css" href="/static/admin/css/forms.css">
	<script type="text/javascript" src="/admin/jsi18n/"></script>
	<script type="text/javascript" src="/static/admin/js/core.js"></script>
	

	<!-- this is just the favicon -->
	<link rel="shortcut icon" href="{% static '/habit/images/logos/favicon.ico' %}">
	


	<!-- this gives us the fonts and the like, comment characters -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css">

	<link rel="stylesheet" type="text/css" href="{% static '/habit/css/instagram.css' %}">
	<script type="text/javascript" src="{% static '/habit/js/jquery.js' %}"></script>
	<script src="{% static '/habit/js/habit-js.js' %}"></script>





	<div class="top-nav-bar">
		<div class="container">
			<a href="{% url 'home' %}"><img src="{% static '/habit/images/logos/logo_grey.png' %}" width="75px" height="75px" ></a>
		</div>
	</div>


	<div class="container">


		<div class="profile">

			<div class="profile-image">

				<img src="https://images.unsplash.com/photo-1513721032312-6a18a42c8763?w=152&h=152&fit=crop&crop=faces" alt="">

			</div>

			<div class="profile-user-settings">

				<h1 class="profile-user-name">{{ profile_user.username }}</h1>

				{% is_this_owned_by_user profile_user user as owned_by_user %}
				{% is_profile_followed_by_user profile_user user as user_follows_profile %}
				{% is_user_followed_by_profile_user profile_user user as user_followed_by_profile_user %}

				{% if owned_by_user %}
					<button class="btn profile-edit-btn">Edit Profile</button>
					{% if not create_view %}
					<button class="btn profile-edit-btn new-track-btn" onclick="location.href='{% url 'new-track' %}'" type="button">New Track</button>
					{% endif %}
				{% elif user_follows_profile %}
					<button class="btn profile-follow-btn profile-followed" id="profile-follow-btn" data-url="{% url 'ProfileFollowToggle' %}" data-profile-user-id="{{ profile_user.id }}">Followed</button>
				{% elif user_followed_by_profile_user %}
					<button class="btn profile-follow-btn">Follow back</button>
				{% else %}
					<button class="btn profile-follow-btn" id="profile-follow-btn" data-url="{% url 'ProfileFollowToggle' %}" data-profile-user-id="{{ profile_user.id }}">Follow</button>
				{% endif %}



				<button class="btn profile-settings-btn" aria-label="profile settings"><i class="fas fa-cog" aria-hidden="true"></i></button>

			</div>

			<div class="profile-stats">

				<ul>
					<li><span class="profile-stat-count">{{ total_posts_made }}</span> posts</li>
					<li><span class="profile-stat-count" id="followers-count">{{ followers_count }}</span> followers</li>
					<li><span class="profile-stat-count" id="following-count">{{ following_count }}</span> following</li>
				</ul>
				{% if checkins_expected is not None %}
				<ul>
					{% if checkins_expected > 0 %}
					<li>
						<a href="{{ new_post_url }}">
							<span class="profile-stat-count">{{ checkins_expected }}</span> check-ins left for you today
						</a>
					</li>
					{% else %}
						<li><span class="profile-stat-count"></span>You're all caught up on your Habits!</li>
					{% endif %}
				</ul>
				{% endif %}

				

			</div>

			<div class="profile-bio">

				<p><span class="profile-real-name">{{ profile_user.first_name }} {{ profile_user.last_name }}</span> Lorem ipsum dolor sit, amet consectetur adipisicing elit üì∑‚úàÔ∏èüèïÔ∏è</p>

			</div>

		</div>
		<!-- End of profile section -->
		{% if num_posts_made %}
		<div class="profile-track-details">
			<div class="profile-track-detail-stats">
				<ul>
					<li>
						Habit Track: {{ track_name }}
						
						<div class="tooltip">	
						<span class="profile-track-detail-stat-count">
							(
							<span class= "profile-track-stat-posts-made">{{ num_posts_made }}</span> / 
							<span class= "profile-track-stat-posts-missed">{{ num_posts_missed }}</span> / 
							<span class= "profile-track-stat-posts-expected">{{ num_posts_expected }}</span>
							)
						</span>
						<span class="tooltiptext">Posts Made/Missed/Expected</span>
					</div>
					</li>
					<li>
					</li>
					<li>Streaks: 	
					<div class="tooltip">
						<span class="profile-track-detail-stat-count">{{ streak_this_track }} / {{ longest_streak_this_track }}üî•</span>
						<span class="tooltiptext">Current Streak / Longest Streak</span>
					</div>
					</li>

				</ul>
			</div>
			<div class="profile-track-detail-description">
				<ul>
					<li>
						 {{ track_desc }}
					</li>
				</ul>
			</div>
		</div>
		{% endif %}


		<div class="row">
			<div class="nav">
		        <ul>
		          <a href="{{ profile_user.get_profile_url }}">
		          	<li>Posts</li>
		          </a>
		          <a href="{{ profile_user.get_profile_url }}/tracks">
		          	<li>Tracks</li>
		      	  </a>
		      	  {% if track_url %}
		      	  <a href="{{ track_url }}/grid">
		          	<li>Grid</li>
		      	  </a>
		      	  <a href="{{ track_url }}/feed">
		          	<li>Feed</li>
		      	  </a>
		          {% endif %}
		          
		        </ul>
		    </div>
		</div>
	</div>
	<!-- End of container -->
</header>


{% block gallery %}

{% endblock %}

{% block form-content %}
{% endblock %}