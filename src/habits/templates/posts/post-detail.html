{% extends "profile/profile-base.html" %}

{% block gallery %}

<main>


	<div class="container">

		<div class="gallery-feed">

			{% block content %}


				{% include 'posts/grid-post-preview.html' with habit_post=post truncate=True detail=False %} <!-- Created a new variable to pass object in as --> 


			{% endblock %}
			<div class="post-details">
				<a href="{{ profile_url }}">{{ profile_user.username }}</a> hahahaha
			</div>



			<button id="go">Say hello</button>

			<div id="result"></div>


			<div>
				{% for c in post.comments.all %}
				{% if c.parent is None %}
				<p>{{ c.timestamp }} {{ c.user }} {{ c.comment }}</p>
					{% for r in c.replies.all %}
						<p>-----{{ r.timestamp }} {{ r.user }} {{ r.comment }}</p>
					{% endfor %}

					<button type="reply-button" value ="Add Child" onclick="addChild();">Reply</button>
					<form id="reply-to-comment" class="post-form">
						{% csrf_token %}
    					{{ form.as_p }}
    					<button type='submit'>Post</button>
					</form>

				{% endif %}
				{% endfor %}
			</div>
			<form method='POST' action='.' class="post-form"> 
				{% csrf_token %}
    			{{ form.as_p }}
				<button type='submit'>Post</button>
			</form>
			
		</div>
		<!-- End of gallery -->

		<div class="loader"></div>

	</div>
	<!-- End of container -->

</main>

{% endblock %}